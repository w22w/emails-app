{"ast":null,"code":"import _defineProperty from\"/EX_WIN/PROJECTS/MyGithub/emails-app/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/EX_WIN/PROJECTS/MyGithub/emails-app/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useMemo,useState}from\"react\";import css from'./User.module.scss';import ClassNames from'classnames';import{shallowEqual,useSelector}from'react-redux';import{getUsersAllByIdUserName,getUsersInboxByIdCount,getUsersInboxByIdLastMessageId}from'store/users/selectors';import{getMessagesInboxByIdBody,getMessagesInboxByIdSubject}from'store/messages/selectors';import Modal from'../Modal';import UserMessages from'../Modal/UserMessages';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var InboxUser=function InboxUser(props){var user=props.user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showPopup=_useState2[0],setShowPopup=_useState2[1];var userName=useSelector(function(state){return getUsersAllByIdUserName(state,user.id);},shallowEqual);var count=useSelector(function(state){return getUsersInboxByIdCount(state,user.id);},shallowEqual);var messageId=useSelector(function(state){return getUsersInboxByIdLastMessageId(state,user.id);},shallowEqual);var subject=useSelector(function(state){return getMessagesInboxByIdSubject(state,messageId);},shallowEqual);var body=useSelector(function(state){return getMessagesInboxByIdBody(state,messageId);},shallowEqual);var countersClasses=useMemo(function(){return ClassNames(css.Counter,_defineProperty({},css.Invisible,!count));},[count]);var onRowClick=function onRowClick(e){e&&e.stopPropagation&&e.stopPropagation();setShowPopup(true);};var onClose=function onClose(e){e&&e.stopPropagation&&e.stopPropagation();setShowPopup(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:css.UserRow,onClick:onRowClick,children:[/*#__PURE__*/_jsxs(\"div\",{className:ClassNames(css.UserCol,css.First),children:[/*#__PURE__*/_jsx(\"div\",{className:countersClasses,children:count}),/*#__PURE__*/_jsx(\"div\",{children:userName})]}),/*#__PURE__*/_jsx(\"div\",{className:css.UserCol,children:subject}),/*#__PURE__*/_jsx(\"div\",{className:css.UserCol,children:body})]}),showPopup&&/*#__PURE__*/_jsx(Modal,{onClose:onClose,children:/*#__PURE__*/_jsx(UserMessages,{id:user.id,onClose:onClose})})]});};export default InboxUser;","map":{"version":3,"sources":["/EX_WIN/PROJECTS/MyGithub/emails-app/app/src/components/Users/InboxUser.js"],"names":["React","useMemo","useState","css","ClassNames","shallowEqual","useSelector","getUsersAllByIdUserName","getUsersInboxByIdCount","getUsersInboxByIdLastMessageId","getMessagesInboxByIdBody","getMessagesInboxByIdSubject","Modal","UserMessages","InboxUser","props","user","showPopup","setShowPopup","userName","state","id","count","messageId","subject","body","countersClasses","Counter","Invisible","onRowClick","e","stopPropagation","onClose","UserRow","UserCol","First"],"mappings":"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","sourcesContent":["import React, { useMemo, useState } from \"react\";\nimport css from './User.module.scss'\nimport ClassNames from 'classnames'\nimport { shallowEqual, useSelector } from 'react-redux';\nimport { getUsersAllByIdUserName, getUsersInboxByIdCount, getUsersInboxByIdLastMessageId } from 'store/users/selectors';\nimport { getMessagesInboxByIdBody, getMessagesInboxByIdSubject } from 'store/messages/selectors';\nimport Modal from '../Modal';\nimport UserMessages from '../Modal/UserMessages';\n\nconst InboxUser = (props) => {\n    const { user } = props\n    const [ showPopup, setShowPopup ] = useState(false)\n    const userName = useSelector(state => getUsersAllByIdUserName(state, user.id), shallowEqual)\n    const count = useSelector(state => getUsersInboxByIdCount(state, user.id), shallowEqual)\n    const messageId = useSelector(state => getUsersInboxByIdLastMessageId(state, user.id), shallowEqual)\n    const subject = useSelector(state => getMessagesInboxByIdSubject(state, messageId), shallowEqual)\n    const body = useSelector(state => getMessagesInboxByIdBody(state, messageId), shallowEqual)\n    \n    const countersClasses = useMemo(() => {\n        return ClassNames(css.Counter, {\n            [ css.Invisible ]: !count\n        })\n    }, [ count ])\n    \n    const onRowClick = (e) => {\n        e && e.stopPropagation && e.stopPropagation()\n        setShowPopup(true)\n    }\n    const onClose = (e) => {\n        e && e.stopPropagation && e.stopPropagation()\n        setShowPopup(false)\n    }\n    \n    return <>\n        <div className={css.UserRow} onClick={onRowClick}>\n            <div className={ClassNames(css.UserCol, css.First)}>\n                <div className={countersClasses}>{count}</div>\n                <div>{userName}</div>\n            </div>\n            <div className={css.UserCol}>{subject}</div>\n            <div className={css.UserCol}>{body}</div>\n        </div>\n        {showPopup && <Modal onClose={onClose}><UserMessages id={user.id} onClose={onClose}/></Modal>}\n    </>\n}\n\nexport default InboxUser\n"]},"metadata":{},"sourceType":"module"}